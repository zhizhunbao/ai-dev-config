# 故事点估算指南

## 什么是故事点？

故事点是衡量用户故事**相对复杂度**的单位，而不是绝对时间。它综合考虑：

- **复杂度**: 技术难度
- **工作量**: 代码量/任务数
- **不确定性**: 风险和未知因素

---

## 斐波那契数列

使用斐波那契数列估算: **1, 2, 3, 5, 8, 13, 21**

| 故事点  | 相对大小 | 典型场景                         |
| ------- | -------- | -------------------------------- |
| **1**   | 极小     | 修改文案、调整样式、简单配置     |
| **2**   | 小       | 添加简单字段、基础 UI 组件       |
| **3**   | 中等     | 标准 CRUD 操作、新增简单页面     |
| **5**   | 较大     | 复杂组件、跨模块功能、API 集成   |
| **8**   | 大       | 新功能模块、复杂业务逻辑         |
| **13**  | 很大     | 架构级变更、大型集成（建议拆分） |
| **21+** | 过大     | **必须拆分**为更小的故事         |

---

## 参考基准

选择一个团队熟悉的"基准故事"作为 **3 分** 参考：

### 基准示例（3 分）

- 创建一个标准的 CRUD API 端点
- 实现一个中等复杂度的 React 组件
- 编写一个标准功能的单元测试套件

### 对比估算

| 如果任务...    | 估算              |
| -------------- | ----------------- |
| 比基准简单很多 | 1 分              |
| 比基准稍简单   | 2 分              |
| 与基准相当     | 3 分              |
| 比基准稍复杂   | 5 分              |
| 比基准复杂很多 | 8 分              |
| 比基准复杂太多 | 13 分（考虑拆分） |

---

## 估算维度

### 1. 复杂度 (Complexity)

- 技术难度有多高？
- 是否涉及新技术/框架？
- 逻辑是否复杂？

### 2. 工作量 (Effort)

- 需要改动多少文件？
- 代码量大概多少？
- 涉及多少个模块？

### 3. 不确定性 (Uncertainty)

- 是否有未知的技术风险？
- 需求是否明确？
- 是否依赖外部系统？

---

## 故事点 vs 时间

故事点不等于时间，但可以作为参考：

| 故事点 | 参考时间（单人）  |
| ------ | ----------------- |
| 1      | 0.5 - 1 天        |
| 2      | 1 - 2 天          |
| 3      | 2 - 3 天          |
| 5      | 3 - 5 天          |
| 8      | 5 - 8 天          |
| 13     | 8+ 天（建议拆分） |

---

## Sprint 容量

### 单人团队

```
Sprint 长度: 2 周 = 10 工作日
专注系数: 0.7 (预留 buffer)
理想容量: 15-20 故事点/Sprint
```

### 多人团队

```
团队容量 = 人数 × 单人容量 × 0.9 (沟通损耗)
```

---

## 估算技巧

### 1. Planning Poker

- 每人独立估算
- 同时亮牌
- 讨论差异较大的估算
- 达成共识

### 2. T-shirt Sizing

先用 T-shirt 尺码分类，再转换：
| Size | 故事点 |
|------|--------|
| XS | 1 |
| S | 2 |
| M | 3 |
| L | 5 |
| XL | 8 |
| XXL | 13 (需拆分) |

### 3. 三点估算

```
估算 = (乐观 + 4×最可能 + 悲观) / 6
```

---

## 常见陷阱

### ❌ 避免这些错误

1. **把故事点当成时间**
   - 故事点是相对复杂度，不是小时/天

2. **过度精确**
   - 不需要纠结 "3 还是 4"
   - 使用斐波那契数列限制选项

3. **个人能力差异**
   - 估算应反映任务本身的复杂度
   - 而非某个人完成它的速度

4. **忽略测试和文档**
   - 完整估算应包括测试编写
   - 以及必要的文档更新

5. **低估不确定性**
   - 有未知因素时适当增加估算
   - 宁可高估，不要低估

---

## Velocity 追踪

### 什么是 Velocity？

团队在一个 Sprint 内完成的故事点总数。

### 如何使用？

```
平均 Velocity = 过去 3-5 个 Sprint 完成点数的平均值

下一个 Sprint 计划容量 ≈ 平均 Velocity
```

### 示例

| Sprint   | 计划 | 完成     |
| -------- | ---- | -------- |
| Sprint 1 | 20   | 15       |
| Sprint 2 | 18   | 16       |
| Sprint 3 | 16   | 18       |
| **平均** | -    | **16.3** |

→ Sprint 4 计划容量建议: 16 点

---

## 检查清单

估算前确认：

- [ ] 需求是否清晰？
- [ ] 验收标准是否明确？
- [ ] 是否识别了技术风险？
- [ ] 是否考虑了依赖？
- [ ] 故事是否足够小（≤8 点）？
